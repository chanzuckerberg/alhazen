# AUTOGENERATED! DO NOT EDIT! File to edit: ../nbs/01_apps.ipynb.

# %% auto 0
__all__ = ['single_paper_chatbot']

# %% ../nbs/01_apps.ipynb 2
import os
from .tools.single_document_qa import LocalFileLangChainChatBot

# %% ../nbs/01_apps.ipynb 3
def single_paper_chatbot(doc_dir, 
        llm_name, 
        embed_model_name='hkunlp/instructor-large',
        chunk_size=1000,
        chunk_overlap=100,
        section_regex=None):
    
    """Run a chatbot on a single paper - useful for testing. Execute this as follows:

    Set environment variable LLMS_TEMP_DIR to a directory where you want to store the temporary files

    `os.environ['LLMS_TEMP_DIR'] = '/tmp/alhazen'`
    
    Run the chatbot 
    
    `python -m fire alhazen.apps single_paper_chatbot '/path/to/pdf/or/nxml/files/' 'mistral-7b-instruct'`
    """
    
    chatbot = LocalFileLangChainChatBot(
                doc_dir, 
                llm_name,
                embed_model_name=embed_model_name,
                chunk_size=chunk_size,
                chunk_overlap=chunk_overlap,
                section_regex=section_regex)
    chatbot.run_gradio()

#os.environ['LLMS_TEMP_DIR'] = '/tmp/alhazen'
#single_paper_chatbot('/Users/gburns/Documents/2023H2/cryoet_portal_rocrates/reading/cryoet_papers/', 'mistral-7b-instruct', section_regex='[Mm]ethods')
